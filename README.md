kubectl get pods --all-namespaces -o json | jq -r '.items[] | select(.status.containerStatuses[]?.state.waiting.reason == "CrashLoopBackOff" or .status.containerStatuses[]?.state.waiting.reason == "ImagePullBackOff") | [.metadata.namespace, .metadata.name, .status.phase, (.status.containerStatuses[] | select(.state.waiting.reason == "CrashLoopBackOff" or .state.waiting.reason == "ImagePullBackOff") | .state.waiting.reason)] | @tsv'
kubectl get pods --all-namespaces -o custom-columns=NAMESPACE:.metadata.namespace,NAME:.metadata.name,STATUS:.status.phase,REASON:.status.containerStatuses[0].state.waiting.reason | grep -E 'CrashLoopBackOff|ImagePullBackOff'
